<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./partials/head'); %>
</head>
<body class="container">



<main class="height: 100%">
  <h3>
    Danh sách khách hàng
  </h3>
    <form method="post" action="/upload" enctype="multipart/form-data">
      <div>
        <label>Chọn file (.CSV)</label>
        <input
          type="file"
          id="file_uploads"
          name="file"
          accept=".CSV"
           />
      </div>
      <button>Tải lên</button>
    </form>
  <button class="mt-2"><a href="/download" > Export (.CSV)</a></button>
  <table class="table  table-striped  table-hover">
    <thead>
      <tr>
        <th scope="col">STT</th>
        <th scope="col">Họ tên</th>
        <th scope="col">Chức vụ</th>
        <th scope="col">Loại vé</th>
        <th scope="col">Công ty</th>
        <th scope="col">Số điện thoại</th>
        <th scope="col">Check in</th>
      </tr>
    </thead>
    <tbody class="table-group-divider">
      <% data.data.forEach(function(item, index) { %>
      <tr>
        <th scope="row"><%= data.current_page > 1 ?  ((data.current_page - 1)  * 15) + (index + 1)  :  index+1%></th>
        <td><%= item.name%></td>
        <td><%= item.position%></td>
        <td><%= item.ticket%></td>
        <td><%= item.company%></td>
        <td><%= item.phone%></td>
        <td class="d-flex justify-content-center">
            <span class="badge badge-pill {<%= item.check_in ? 'badge badge-success' : 'badge badge-warning' %> }"
              ><%= item.check_in ? 'Đã đến event' : 'Chưa hoàn thành' %></span>
        </td>
      </tr>
      <% }); %>
     
     
    </tbody>
  </table>
  <nav aria-label="Page navigation ">
  <% if (data.total_page > 1) { %>

    <ul class="pagination">
        <% if (data.current_page == 1) { %>
            <li class="disabled page-item"  ><a class="page-link">Trước</a></li>
        <% } else { %>
            <li   page-item><a href="/customer?page=<%= (data.current_page-1) %>" class="page-link" >Trước</a></li>
        <% } %>
        <% var i = (Number(data.current_page) > 5 ? Number(data.current_page) - 4 : 1) %>
        <% if (i !== 1) { %>
          <li class="disabled page-item"><a class="page-link" >...</a></li>
        <% } %>
       
        <% for (; i <= (Number(data.current_page) + 4) && i <= data.total_page; i++) { %>
            <% if (i == data.current_page) { %>
                <li class="active page-item"><a  class="page-link" ><%= i %></a></li>
            <% } else { %>
                <li class="page-item" ><a class="page-link"  href="/customer?page=<%= i %>"><%= i %></a></li>
            <% } %>
            <% if (i == Number(data.current_page) + 4 && i < data.total_page) { %>
                <li class="disabled"><a>...</a></li>
            <% } %>
        <% } %>
        <% if (data.current_page == data.total_page) { %>
            <li   page-item class="disabled"><a class="page-link">Last</a></li>
        <% } else { %>
            <li  page-item><a class="page-link" href="/customer?page=<%= data.total_page %>">Last</a></li>
        <% } %>
    </ul>
  <% } %>
  </nav>
</main>

<footer>
  <%- include('./partials/footer'); %>
</footer>
</body>
</html>